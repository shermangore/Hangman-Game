<!-- INSTRUCTIONS
1. Watch the demo.
2. Choose a theme for your game! In the demo, we picked an 80s theme: 80s questions, 80s sound and an 80s aesthetic. You can choose any subject for your theme, though, so be creative!
3. Use key events to listen for the letters that your players will type.
4. Display the following on the page:
5. Press any key to get started!
6.Wins: (# of times user guessed the word correctly).
  * If the word is madonna, display it like this when the game starts: _ _ _ _ _ _ _.
  * As the user guesses the correct letters, reveal them: m a d o _  _ a.
7. Number of Guesses Remaining: (# of guesses remaining for the user).
8. Letters Already Guessed: (Letters the user has guessed, displayed like L Z Y H).
9. After the user wins/loses the game should automatically choose another word and make the user play it.

****Hangman Game Bonuses****
1. Play a sound or song when the user guesses their word correctly, like in our demo.
2. Write some stylish CSS rules to make a design that fits your game's theme.
3. HARD MODE: Organize your game code as an object, except for the key events to get the letter guessed. This will be a challenge if you haven't coded with JavaScript before, but we encourage anyone already familiar with the language to try this out.
4. Save your whole game and its properties in an object.
5. Save any of your game's functions as methods, and call them underneath your object declaration using event listeners.
6.Don't forget to place your global variables and functions above your object.
  * Remember: global variables, then objects, then calls.
7. Definitely talk with a TA or your instructor if you get tripped up during this challenge.
-->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Doggone Hangman!</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
    		integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" 
    		crossorigin="anonymous">
    <link href="assets/css/style.css" rel="stylesheet" id="theme-stylesheet">
    <script>
    	// 1) Create global variables
    	// - Word List
		const dogList = [
							{"breed":"AZAWAKH", "rank":8}, 
							{"breed":"BOXER", "rank":3}, 
							{"breed":"BULLDOG", "rank":3}, 
							{"breed":"BULLMASTIFF", "rank":5}, 
							{"breed":"ROTTWEILER", "rank":4}, 
							{"breed":"COLLIE", "rank":6}, 
							{"breed":"XOLOITZCUINTLE", "rank":10}
						];

    	// - Number of Guesses
		let guessCount = 0;

    	// - Number Wrong
		let wrongCount = 0;

    	// - Difficulty Level (global?)
		let diffLevel = "";

    	// - Alphabet Array
		const alphabet = [
							"a", "b", "c", "d", "e", "f", "g", "h", "i", 
						  	"j", "k", "l", "m", "n", "o", "p", "q", "r", 
						  	"s", "t", "u", "v", "w", "x", "y", "z"
						 ];

    	// - GameStarted 
		let gameStarted = false;

    	// - Object variable for img tag
		let hgImage;

    	// - Image array to keep track of image order
    	const imgList = [
    						"assets/images/HangMan_Base.png",
    						"assets/images/HangMan_Post.png",
    						"assets/images/HangMan_Horizontal.png",
    						"assets/images/HangMan_Noose.png",
    						"assets/images/HangMan_Head.png",
    						"assets/images/HangMan_Body.png",
    						"assets/images/HangMan_RightArm.png",
    						"assets/images/HangMan_LeftArm.png",
    						"assets/images/HangMan_RightLeg.png",
    						"assets/images/HangMan_LeftLeg.png",
    						"assets/images/HangMan_RightFoot.png",
    						"assets/images/HangMan_LeftFoot.png"
    					];

    	// - Empty array to fill with letters from the randomly selected word
		let theWord = [];

		// - Array of the blank spaces - for easy replacement with letters
		let arrWord = [];

		// - Letters guessed so far
		let guessedLetters = [];

    	// 2) Events required
    		// - OnKeyUp - to start the game and to guess letters
    		// - Reset OnClick - to reset game
    		// - Show Answer OnClick - to quit and show all letters
    		// - Give Hint OnClick - to show first empty letter
    		// - Set up blanks

    	document.onkeyup = function(event) {
    		console.log(event.key);
			let userGuess = event.key;

    		// Check to verify the pressed key was either alpha or spacebar
			if (alphabet.indexOf(userGuess) !== -1) {
    			// If alphabetical key:
				// Check if GameStarted = true
				if (gameStarted) {
    					// If false
    						// - Ignore it
    				// If true
					let ltr = theWord.indexOf(userGuess.toUpperCase());
    				
    				// - Check to see if selected letter is in the guesses array
						// If the guess is in the list
							// - Ignore it
						// If the guess is not in the list
					if (guessedLetters.indexOf(userGuess.toUpperCase()) === -1) {
    						// - Update the guess list with the new letter
						guessedLetters.push(userGuess.toUpperCase());

						// Update guessCount label
						document.getElementById("lblGuesses").innerHTML = ++guessCount;						
					}
					// - Check the word list array to see if the letter is in the word
						// If the guess is in the word list,
							// - Update the hangman blanks with the letter
						// If the guess is NOT in the word list
							// - Update the picture to the next picture
							// - Update the wrong guesses count
							// - Check to see if the wrong guesses count > 11
								// If it is > 11
									// - Set GameStarted = false
									// - Display picture to sad dog image
								// If it is <= 11
									// - Ignore it

    				/*********************************************
						CORRECT GUESSES ARE NOT UPDATING THE BLANKS LABEL!!!
    				*********************************************/
					if (ltr !== -1) {
						for (let i = 0; i <theWord.length; i++) {
							if (theWord[i] === userGuess.toUpperCase()) {
								arrWord[i] = userGuess.toUpperCase();
							}
						}

						document.getElementById("lblWord").innerHTML = arrWord.join(" ");
						//update list of letters
						//update array of guessed letters
					} else {
						// check guessCount
						/************************
						THIS IS WRONG, SHOULD ACTUALLY BE CHECKING **WRONG** GUESSES, NOT TOTAL GUESSES
						************************/
						if (guessCount <= 12) {
							// if < 12, then update hangman image
							imgHangman.src = imgList[guessCount - 1];
						} else if (guessCount > 0 && guessCount > 12) {
							// if >= 12, then set image to sad dog 1-5 and stop allowing guesses
							let tempImgNum = Math.floor(Math.random() * 5) + 1;
							imgHangman.src = "assets/images/SadDog_" + tempImgNum + ".jpg";
						}
					}
				}
			} else if (userGuess === " ") { // check if userGuess is spacebar
				// If spacebar:
    			// If true - Ignore it (by default since there is no else/else if)
				// if this is the first press of the spacebar (gamestarted = false _or_ !gameStarted)
				// Check if GameStarted = true
				if (!gameStarted) {
					// If false
					//start game
					hgImage = document.getElementById("imgHangman");

					// - Update GameStarted variable to true
					gameStarted = true;

					// - Set the hangman image to Hangman.png
					hgImage.src = "assets/images/Hangman.png";

					// - Set the guessCount = 0
					guessCount = 0;

					// - Set the wrongCount = 0
					wrongCount = 0;

					// - Get difficult level
					diffLevel = document.querySelector('input[name="diff"]:checked').value;
					
					// - Get word from array
					// - Set hangman blanks to match word (getWord function calls the setBlanks function)
					let tempWord = getWord(diffLevel);
					//let tempArr = tempWord.split("");
					//theWord.push.apply(theWord, tempArr);
				}
			}

    	}

    	function resetGame() {
    		// Set guess count = 0
    		guessCount = 0;

    		// Set difficulty to "easy"
    		diffLevel = "easy";

    		// Set image src to Hangman.png
    		imgHangman.src = "assets/images/Hangman.png";

    		// Set guess count = 0
    		guessCount = 0;

    		// Set wrong count = 0
    		wrongCount = 0;

    		// Set game started = false
    		gameStarted = false;
    	}

    	function giveHint() {
    		// Find nearest blank spot in word
    		// Get value for that location
    		// Update blanks
    	}

    	function showAnswer() {
    		// Set GameStarted = false
    		// Fill in all blanks with correct letters
    	}

	    function setBlanks(word) {
	    	let buildWord = "";

	    	for (let i = 0; i < word.length; i++) {
	    		buildWord += "___ ";
	    	}

	    	buildWord = buildWord.trim();

	    	document.getElementById("lblWord").innerHTML = buildWord;
	    }

		function getWord(diff) {
			let newList = [];

			if (diff === "easy") {
				for (let i = 0; i < dogList.length; i++) {
					if (dogList[i].rank > 0 && dogList[i].rank < 4) {
						newList.push(dogList[i].breed);
					}
				}
			} else if (diff === "medium") {
				for (let i = 0; i < dogList.length; i++) {
					if (dogList[i].rank > 3 && dogList[i].rank < 8) {
				 		newList.push(dogList[i].breed);
					}
				}
			} else if (diff === "hard") {
				for (let i = 0; i < dogList.length; i++) {
					if (dogList[i].rank > 7 && dogList[i].rank <= 10) {
				 		newList.push(dogList[i].breed);
					}
				}
			}

			let rndNum = Math.floor(Math.random() * (newList.length));

			setBlanks(newList[rndNum]);

			return newList[rndNum];
		}
    </script>
</head>
<body>
	<div class="container">
		<div class="jumbotron text-center">
			<h1>Let's Play Doggone Hangman!</h1>
		</div>
		<div class="row">
			<div class="col-lg-4 sidebar">
				<div class="panel panel-primary">
					<div class="panel-heading text-center"><h3>Control Panel</h3></div>
					<div class="panel-body">
						<div class="row">
							<div class="col-lg-4">
								<button type="button" class="btn btn-primary" id="btnReset">Reset Game</button>
							</div>
							<div class="col-lg-4">
								<button type="button" class="btn btn-primary" id="btnAnswer">Show Answer</button>
							</div>
							<div class="col-lg-4">
								<button type="button" class="btn btn-primary" id="btnHint">Give Hint</button>
							</div>
						</div>
						<div class="row text-center">&nbsp;</div>
						<!-- <div class="row text-center"> -->
							<h3 class="text-center">Difficulty:</h3>
						<!-- </div>	 -->
						<div class="row">
								<div class="col-lg-4">
									<input type="radio" name="diff" id="rbEasy" value="easy" checked="checked" class="difficulty" /> <span id="lblEasy" for="rbEasy" class="label label-success label-lg">&nbsp;&nbsp;Easy&nbsp;&nbsp;</span>
								</div>
								<div class="col-lg-4">
									<input type="radio" name="diff" id="rbMedium" value="medium" /> <span id="lblMedium" for="rbMedium" class="label label-warning">Medium</span>
								</div>
								<div class="col-lg-4">
									<input type="radio" name="diff" id="rbHard" value="hard" /> <span id="lblHard" for="rbHard" class="label label-danger">&nbsp;&nbsp;Hard&nbsp;&nbsp;</span>
								</div>
						</div>	
						<hr />
						<h3 class="text-center">Instructions</h4>
						<ul>
							<li>Press spacebar to start the game</li>
							<li>Press any letter key on your keyboard to guess that letter</li>
							<li>Click the "Reset Game" link above to start over</li>
							<li>???</li>
							<li>Profit!</li>
						</ul>
						<hr />
						<div>
							<div>
								<h4>Number of Guesses &nbsp;<span class="label label-default" id="lblGuesses">0</span></h4>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-8 main">
				<div class="row">
					<div class="text-center" style="background: rgba(242, 242, 242, 1">
						<img src="assets/images/Hangman.png" alt="At the beginning" id="imgHangman">
					</div>
				</div>
				<div class="row">
					<div>
						<div class="panel panel-default">
							<div class="panel-body text-center" id="dvGuess">
								<h1><span class="label label-default" id="lblWord"></span></h1>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>